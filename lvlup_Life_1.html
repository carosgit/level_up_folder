<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lvlup Life</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left {
            text-align: left;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo {
            font-size: 2.5em;
            font-weight: bold;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .tagline {
            color: #666;
            font-size: 1.1em;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 20px;
        }

        .feed-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .post-form {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #e9ecef;
        }

        .post-type-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .post-type-btn {
            padding: 8px 16px;
            border: 2px solid #e9ecef;
            background: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .post-type-btn.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
        }

        .post-type-btn:hover {
            border-color: #667eea;
        }

        .post-input {
            width: 100%;
            min-height: 120px;
            border: none;
            background: #2d3748;
            color: #e2e8f0;
            border-radius: 10px;
            padding: 15px;
            font-size: 16px;
            resize: vertical;
            margin-bottom: 10px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        }

        .post-input::placeholder {
            color: #a0aec0;
        }

        .post-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 30px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .post-btn:hover {
            transform: translateY(-2px);
        }

        .posts {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .post {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
        }

        .post:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .post.snippet {
            border-left-color: #4299e1;
        }

        .post.project {
            border-left-color: #48bb78;
        }

        .post.tutorial {
            border-left-color: #ed8936;
        }

        .post-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-right: 10px;
        }

        .post-info {
            flex: 1;
        }

        .username {
            font-weight: bold;
            color: #333;
        }

        .timestamp {
            color: #666;
            font-size: 0.9em;
        }

        .type-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
            margin-left: auto;
        }

        .type-snippet {
            background: #bee3f8;
            color: #2b6cb0;
        }

        .type-project {
            background: #c6f6d5;
            color: #2f855a;
        }

        .type-tutorial {
            background: #fed7aa;
            color: #c05621;
        }

        .post-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .code-post {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 10px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            overflow-x: auto;
            white-space: pre-wrap;
            margin-bottom: 10px;
        }

        .code-description {
            color: #666;
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .code-stats {
            color: #a0aec0;
            font-size: 11px;
            margin-bottom: 10px;
            font-style: italic;
        }

        .code-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .code-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 15px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: bold;
        }

        .run-btn {
            background: #48bb78;
            color: white;
        }

        .run-btn:hover {
            background: #38a169;
            transform: translateY(-1px);
        }

        .copy-btn {
            background: #4299e1;
            color: white;
        }

        .copy-btn:hover {
            background: #3182ce;
            transform: translateY(-1px);
        }

        .download-btn {
            background: #9f7aea;
            color: white;
        }

        .download-btn:hover {
            background: #805ad5;
            transform: translateY(-1px);
        }

        .code-output {
            background: #1a202c;
            color: #e2e8f0;
            padding: 10px;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 12px;
            margin-top: 10px;
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
            border-left: 3px solid #4299e1;
        }

        .code-error {
            border-left-color: #f56565;
            color: #fed7d7;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .stats-box {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .stats-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
            display: flex;
            align-items: center;
        }

        .stats-icon {
            width: 20px;
            height: 20px;
            margin-right: 8px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 50%;
        }

        .stats-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .stats-item:last-child {
            border-bottom: none;
        }

        .stats-count {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .trend-item {
            display: flex;
            align-items: center;
            padding: 8px 0;
        }

        .trend-arrow {
            margin-right: 8px;
            font-size: 1.2em;
        }

        .trend-up {
            color: #28a745;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                order: -1;
            }
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .auth-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .auth-modal {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center;
        }

        .auth-title {
            font-size: 1.8em;
            font-weight: bold;
            color: #333;
            margin-bottom: 30px;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .auth-input {
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .auth-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .auth-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 15px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .auth-btn:hover {
            transform: translateY(-2px);
        }

        .auth-switch {
            margin-top: 20px;
            color: #666;
        }

        .auth-link {
            color: #667eea;
            cursor: pointer;
            text-decoration: underline;
        }

        .auth-link:hover {
            color: #764ba2;
        }

        .user-menu {
            position: relative;
            display: inline-block;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }

        .user-dropdown {
            position: absolute;
            top: 50px;
            right: 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            min-width: 200px;
            padding: 10px 0;
            display: none;
        }

        .user-dropdown.show {
            display: block;
        }

        .dropdown-item {
            padding: 10px 20px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .dropdown-item:hover {
            background: #f8f9fa;
        }

        .header-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .header-btn:hover {
            transform: translateY(-1px);
        }

        .header-btn.secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .hidden {
            display: none !important;
        }

        .post-form-fields {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 15px;
        }

        .title-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            background: white;
            color: #333;
        }

        .title-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .description-input {
            width: 100%;
            min-height: 60px;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 14px;
            resize: vertical;
            background: white;
            color: #333;
            font-family: inherit;
        }

        .description-input:focus {
            outline: none;
            border-color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-left">
                <div class="logo">lvlup Life</div>
                <div class="tagline">Nach der Weiterbildung ist vor der Weiterbildung</div>
            </div>
            <div class="header-right">
                <div id="guestButtons" class="header-buttons">
                    <button id="loginBtn" class="header-btn secondary">Anmelden</button>
                    <button id="registerBtn" class="header-btn">Registrieren</button>
                </div>
                <div id="userMenu" class="user-menu hidden">
                    <div class="user-avatar" id="userAvatar"></div>
                    <div class="user-dropdown" id="userDropdown">
                        <div class="dropdown-item" id="profileBtn">
                            Mein Profil
                        </div>
                        <div class="dropdown-item" id="settingsBtn">
                            Einstellungen
                        </div>
                        <div class="dropdown-item" id="logoutBtn">
                            Abmelden
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="feed-section">
                <div class="post-form">
                    <div class="post-type-selector">
                        <button id="snippetBtn" class="post-type-btn active" data-type="snippet">Code-Schnipsel</button>
                        <button id="projectBtn" class="post-type-btn" data-type="project">Projekte</button>
                        <button id="tutorialBtn" class="post-type-btn" data-type="tutorial">Tutorials</button>
                    </div>
                    <div class="post-form-fields">
                        <input id="titleInput" class="title-input" placeholder="Titel deines Codes..." />
                        <textarea id="descriptionInput" class="description-input" placeholder="Beschreibung (optional)..."></textarea>
                    </div>
                    <textarea id="postInput" class="post-input" placeholder="// Dein JavaScript-Code hier..."></textarea>
                    <button id="postBtn" class="post-btn">Code teilen</button>
                </div>
                <div id="posts" class="posts">
                    <!-- Posts werden hier dynamisch eingef√ºgt -->
                </div>
            </div>

            <div class="sidebar">
                <div class="stats-box">
                    <div class="stats-title">
                        <div class="stats-icon"></div>
                        Beliebte Technologien
                    </div>
                    <div id="topTechnologies">
                        <div class="loading"></div>
                    </div>
                </div>

                <div class="stats-box">
                    <div class="stats-title">
                        <div class="stats-icon"></div>
                        Code-Kategorien
                    </div>
                    <div id="categoryStats">
                        <div class="stats-item">
                            <span>Code-Schnipsel</span>
                            <span id="snippetCount" class="stats-count">0</span>
                        </div>
                        <div class="stats-item">
                            <span>Projekte</span>
                            <span id="projectCount" class="stats-count">0</span>
                        </div>
                        <div class="stats-item">
                            <span>Tutorials</span>
                            <span id="tutorialCount" class="stats-count">0</span>
                        </div>
                    </div>
                </div>

                <div class="stats-box">
                    <div class="stats-title">
                        <div class="stats-icon"></div>
                        Trending Code
                    </div>
                    <div id="trendingCode">
                        <div class="loading"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Authentication Modal -->
    <div id="authOverlay" class="auth-overlay hidden">
        <div class="auth-modal">
            <div id="authTitle" class="auth-title">Anmelden</div>
            <form id="authForm" class="auth-form">
                <input type="text" id="usernameInput" class="auth-input" placeholder="Benutzername" required>
                <input type="email" id="emailInput" class="auth-input" placeholder="E-Mail" style="display: none;">
                <input type="password" id="passwordInput" class="auth-input" placeholder="Passwort" required>
                <input type="password" id="confirmPasswordInput" class="auth-input" placeholder="Passwort wiederholen" style="display: none;">
                <button type="submit" id="authSubmitBtn" class="auth-btn">Anmelden</button>
            </form>
            <div class="auth-switch">
                <span id="authSwitchText">Noch kein Account?</span>
                <span id="authSwitchLink" class="auth-link">Jetzt registrieren</span>
            </div>
            <div class="auth-switch">
                <span class="auth-link" id="authCloseBtn">Schlie√üen</span>
            </div>
        </div>
    </div>

    <script>
        // Globale Variablen
        let posts = [];
        let techFrequency = {};
        let currentUser = null;
        let users = {}; // Simulierte Benutzer-Datenbank
        let isLoginMode = true;
        let currentPostType = 'snippet';
        
        // Technologie-Keywords f√ºr Analyse
        const techKeywords = ['javascript', 'js', 'react', 'vue', 'angular', 'node', 'express', 'mongodb', 'sql', 'css', 'html', 'typescript', 'python', 'java', 'api', 'json', 'async', 'promise', 'dom', 'function', 'array', 'object', 'class', 'component'];
        
        // Beispiel-Posts f√ºr Demo
        const samplePosts = [
            {
                username: "JavaScriptMaster",
                title: "Array Helper Functions",
                description: "N√ºtzliche Helper-Funktionen f√ºr Array-Operationen",
                content: `// N√ºtzliche Array-Hilfsfunktionen
const arrayHelpers = {
    // Doppelte Werte entfernen
    unique: (arr) => [...new Set(arr)],
    
    // Array in Chunks aufteilen
    chunk: (arr, size) => {
        return Array.from({length: Math.ceil(arr.length / size)}, 
            (v, i) => arr.slice(i * size, i * size + size));
    },
    
    // Zuf√§lliges Element
    random: (arr) => arr[Math.floor(Math.random() * arr.length)],
    
    // Array mischen
    shuffle: (arr) => arr.sort(() => Math.random() - 0.5)
};

// Beispiel-Verwendung:
const numbers = [1, 2, 2, 3, 4, 4, 5];
console.log("Unique:", arrayHelpers.unique(numbers));
console.log("Chunks:", arrayHelpers.chunk(numbers, 3));`,
                timestamp: new Date(Date.now() - 300000),
                type: "snippet"
            },
            {
                username: "WebDevPro",
                title: "Einfacher To-Do App",
                description: "Vollst√§ndige To-Do-Anwendung mit LocalStorage",
                content: `// Vollst√§ndige To-Do-App
class TodoApp {
    constructor() {
        this.todos = JSON.parse(localStorage.getItem('todos')) || [];
        this.init();
    }
    
    init() {
        this.createHTML();
        this.bindEvents();
        this.render();
    }
    
    createHTML() {
        document.body.innerHTML = \`
            <div style="max-width: 500px; margin: 50px auto; padding: 20px;">
                <h1>Meine To-Dos</h1>
                <div style="margin-bottom: 20px;">
                    <input id="todoInput" placeholder="Neue Aufgabe..." style="width: 70%; padding: 10px;">
                    <button id="addBtn" style="width: 25%; padding: 10px;">Hinzuf√ºgen</button>
                </div>
                <ul id="todoList" style="list-style: none; padding: 0;"></ul>
            </div>
        \`;
    }
    
    bindEvents() {
        document.getElementById('addBtn').onclick = () => this.addTodo();
        document.getElementById('todoInput').onkeypress = (e) => {
            if (e.key === 'Enter') this.addTodo();
        };
    }
    
    addTodo() {
        const input = document.getElementById('todoInput');
        const text = input.value.trim();
        if (text) {
            this.todos.push({id: Date.now(), text, completed: false});
            this.save();
            this.render();
            input.value = '';
        }
    }
    
    toggleTodo(id) {
        const todo = this.todos.find(t => t.id === id);
        if (todo) todo.completed = !todo.completed;
        this.save();
        this.render();
    }
    
    deleteTodo(id) {
        this.todos = this.todos.filter(t => t.id !== id);
        this.save();
        this.render();
    }
    
    render() {
        const list = document.getElementById('todoList');
        list.innerHTML = this.todos.map(todo => \`
            <li style="padding: 10px; border: 1px solid #ddd; margin: 5px 0; display: flex; align-items: center;">
                <input type="checkbox" \${todo.completed ? 'checked' : ''} 
                       onchange="app.toggleTodo(\${todo.id})" style="margin-right: 10px;">
                <span style="flex: 1; \${todo.completed ? 'text-decoration: line-through; color: #888;' : ''}">\${todo.text}</span>
                <button onclick="app.deleteTodo(\${todo.id})" style="background: #ff4444; color: white; border: none; padding: 5px 10px;">L√∂schen</button>
            </li>
        \`).join('');
    }
    
    save() {
        localStorage.setItem('todos', JSON.stringify(this.todos));
    }
}

// App starten
const app = new TodoApp();`,
                timestamp: new Date(Date.now() - 450000),
                type: "project"
            },
            {
                username: "CodeTeacher",
                title: "Async/Await Tutorial",
                description: "Schritt-f√ºr-Schritt Einf√ºhrung in asynchrone Programmierung",
                content: `// Async/Await Tutorial - Schritt f√ºr Schritt

// 1. Basis: Promise erstellen
function delay(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}

// 2. Mit .then() (alt)
function oldWay() {
    console.log("Start (old way)");
    delay(1000)
        .then(() => {
            console.log("Nach 1 Sekunde");
            return delay(1000);
        })
        .then(() => {
            console.log("Nach 2 Sekunden");
        });
}

// 3. Mit async/await (modern)
async function modernWay() {
    console.log("Start (modern way)");
    await delay(1000);
    console.log("Nach 1 Sekunde");
    await delay(1000);
    console.log("Nach 2 Sekunden");
}

// 4. Fehlerbehandlung
async function withErrorHandling() {
    try {
        const response = await fetch('https://jsonplaceholder.typicode.com/posts/1');
        const data = await response.json();
        console.log("Daten erhalten:", data.title);
    } catch (error) {
        console.error("Fehler:", error.message);
    }
}

// 5. Mehrere Promises parallel
async function parallelExecution() {
    console.log("Starte parallele Requests...");
    
    const [post1, post2, post3] = await Promise.all([
        fetch('https://jsonplaceholder.typicode.com/posts/1').then(r => r.json()),
        fetch('https://jsonplaceholder.typicode.com/posts/2').then(r => r.json()),
        fetch('https://jsonplaceholder.typicode.com/posts/3').then(r => r.json())
    ]);
    
    console.log("Alle Posts erhalten:", [post1.title, post2.title, post3.title]);
}

// Beispiele ausf√ºhren:
// modernWay();
// withErrorHandling();
// parallelExecution();`,
                timestamp: new Date(Date.now() - 600000),
                type: "tutorial"
            }
        ];

        // Initialisierung
        document.addEventListener('DOMContentLoaded', function() {
            // Beispiel-User f√ºr Demo
            users = {
                'demo': { username: 'demo', email: 'demo@lvluplife.com', password: 'demo123' },
                'admin': { username: 'admin', email: 'admin@lvluplife.com', password: 'admin123' }
            };
            
            // Sample Posts laden
            samplePosts.forEach(post => addPost(post.username, post.title, post.description, post.content, post.timestamp, post.type));
            
            // Event Listeners
            document.getElementById('postBtn').addEventListener('click', handleNewPost);
            document.getElementById('postInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && e.ctrlKey) {
                    handleNewPost();
                }
            });
            
            // Auth Event Listeners
            setupAuthEventListeners();
            
            // Post Type Event Listeners
            setupPostTypeListeners();
            
            // Initiale Updates
            updateAnalytics();
            updateUIForUser();
        });

        function handleNewPost() {
            const titleInput = document.getElementById('titleInput');
            const descriptionInput = document.getElementById('descriptionInput');
            const codeInput = document.getElementById('postInput');
            
            const title = titleInput.value.trim();
            const description = descriptionInput.value.trim();
            const content = codeInput.value.trim();
            
            if (!currentUser) {
                alert('Bitte logge dich ein, um Code zu posten!');
                showAuthModal(true);
                return;
            }
            
            if (!title) {
                alert('Bitte gib einen Titel ein!');
                return;
            }
            
            if (!content) {
                alert('Bitte f√ºge Code hinzu!');
                return;
            }
            
            addPost(currentUser.username, title, description, content, new Date(), currentPostType);
            titleInput.value = '';
            descriptionInput.value = '';
            codeInput.value = '';
            updateAnalytics();
        }

        function addPost(username, title, description, content, timestamp = new Date(), type = 'snippet') {
            const post = {
                id: 'post_' + Date.now() + '_' + Math.floor(Math.random() * 1000),
                username: username,
                title: title,
                description: description,
                content: content,
                timestamp: timestamp,
                type: type
            };
            
            posts.unshift(post);
            renderPost(post);
            updateTechFrequency(content);
        }

        function renderPost(post) {
            const postsContainer = document.getElementById('posts');
            const postElement = document.createElement('div');
            
            let typeClass, typeLabel, typeBadge;
            
            switch(post.type) {
                case 'snippet':
                    typeClass = 'snippet';
                    typeLabel = 'Code-Schnipsel';
                    typeBadge = 'type-snippet';
                    break;
                case 'project':
                    typeClass = 'project';
                    typeLabel = 'Projekt';
                    typeBadge = 'type-project';
                    break;
                case 'tutorial':
                    typeClass = 'tutorial';
                    typeLabel = 'Tutorial';
                    typeBadge = 'type-tutorial';
                    break;
                default:
                    typeClass = 'snippet';
                    typeLabel = 'Code';
                    typeBadge = 'type-snippet';
            }
            
            postElement.className = `post ${typeClass}`;
            
            const codeLines = post.content.split('\n');
            const totalLines = codeLines.length;
            
            let additionalButtons = '';
            if (post.type === 'project') {
                additionalButtons = '<button class="code-btn download-btn" onclick="downloadProject(\'' + post.id + '\')">üíæ Download</button>';
            }
            
            postElement.innerHTML = `
                <div class="post-header">
                    <div class="avatar">${post.username.charAt(0).toUpperCase()}</div>
                    <div class="post-info">
                        <div class="username">${post.username}</div>
                        <div class="timestamp">${formatTimestamp(post.timestamp)}</div>
                    </div>
                    <div class="type-badge ${typeBadge}">${typeLabel}</div>
                </div>
                <div class="post-title">${escapeHtml(post.title)}</div>
                ${post.description ? `<div class="code-description">${escapeHtml(post.description)}</div>` : ''}
                <div class="code-stats">${totalLines} Zeilen JavaScript</div>
                <div class="code-post">${escapeHtml(post.content)}</div>
                <div class="code-actions">
                    <button class="code-btn run-btn" onclick="runCode('${post.id}')">‚ñ∂Ô∏è Ausf√ºhren</button>
                    <button class="code-btn copy-btn" onclick="copyCode('${post.id}')">üìã Kopieren</button>
                    ${additionalButtons}
                </div>
                <div id="output-${post.id}" class="code-output" style="display: none;"></div>
            `;
            
            postsContainer.insertBefore(postElement, postsContainer.firstChild);
        }

        function updateTechFrequency(content) {
            const contentLower = content.toLowerCase();
            techKeywords.forEach(tech => {
                if (contentLower.includes(tech)) {
                    techFrequency[tech] = (techFrequency[tech] || 0) + 1;
                }
            });
        }

        function updateAnalytics() {
            updateTopTechnologies();
            updateCategoryStats();
            updateTrendingCode();
        }

        function updateTopTechnologies() {
            const topTech = Object.entries(techFrequency)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 5);
            
            const container = document.getElementById('topTechnologies');
            container.innerHTML = '';
            
            topTech.forEach(([tech, count]) => {
                const item = document.createElement('div');
                item.className = 'stats-item';
                item.innerHTML = `
                    <span style="text-transform: capitalize;">${tech}</span>
                    <span class="stats-count">${count}</span>
                `;
                container.appendChild(item);
            });
            
            if (topTech.length === 0) {
                container.innerHTML = '<div style="text-align: center; color: #666;">Noch keine Daten verf√ºgbar</div>';
            }
        }

        function updateCategoryStats() {
            let snippetCount = 0, projectCount = 0, tutorialCount = 0;
            
            posts.forEach(post => {
                switch(post.type) {
                    case 'snippet': snippetCount++; break;
                    case 'project': projectCount++; break;
                    case 'tutorial': tutorialCount++; break;
                }
            });
            
            document.getElementById('snippetCount').textContent = snippetCount;
            document.getElementById('projectCount').textContent = projectCount;
            document.getElementById('tutorialCount').textContent = tutorialCount;
        }

        function updateTrendingCode() {
            const container = document.getElementById('trendingCode');
            const recentPosts = posts.slice(0, 10);
            
            if (recentPosts.length < 3) {
                container.innerHTML = '<div style="text-align: center; color: #666;">Mehr Code f√ºr Trend-Analyse ben√∂tigt</div>';
                return;
            }
            
            const recentTech = {};
            recentPosts.forEach(post => {
                const contentLower = post.content.toLowerCase();
                techKeywords.forEach(tech => {
                    if (contentLower.includes(tech)) {
                        recentTech[tech] = (recentTech[tech] || 0) + 1;
                    }
                });
            });
            
            const trendingTech = Object.entries(recentTech)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 3);
            
            container.innerHTML = '';
            
            if (trendingTech.length === 0) {
                container.innerHTML = '<div style="text-align: center; color: #666;">Keine aktuellen Trends</div>';
                return;
            }
            
            trendingTech.forEach(([tech, count]) => {
                const item = document.createElement('div');
                item.className = 'trend-item';
                item.innerHTML = `
                    <span class="trend-arrow trend-up">üìà</span>
                    <span style="flex: 1; text-transform: capitalize;">${tech}</span>
                    <span class="stats-count">${count}</span>
                `;
                container.appendChild(item);
            });
        }

        function formatTimestamp(timestamp) {
            const now = new Date();
            const diff = now - timestamp;
            const minutes = Math.floor(diff / 60000);
            const hours = Math.floor(diff / 3600000);
            
            if (minutes < 1) return 'Gerade eben';
            if (minutes < 60) return `vor ${minutes}m`;
            if (hours < 24) return `vor ${hours}h`;
            return timestamp.toLocaleDateString('de-DE');
        }

        // Authentication System
        function setupAuthEventListeners() {
            document.getElementById('loginBtn').addEventListener('click', () => showAuthModal(true));
            document.getElementById('registerBtn').addEventListener('click', () => showAuthModal(false));
            document.getElementById('authCloseBtn').addEventListener('click', hideAuthModal);
            document.getElementById('authSwitchLink').addEventListener('click', toggleAuthMode);
            document.getElementById('authForm').addEventListener('submit', handleAuthSubmit);
            document.getElementById('userAvatar').addEventListener('click', toggleUserMenu);
            document.getElementById('logoutBtn').addEventListener('click', logout);
            
            document.getElementById('authOverlay').addEventListener('click', function(e) {
                if (e.target === this) hideAuthModal();
            });
            
            document.addEventListener('click', function(e) {
                if (!document.getElementById('userMenu').contains(e.target)) {
                    document.getElementById('userDropdown').classList.remove('show');
                }
            });
        }

        function showAuthModal(loginMode) {
            isLoginMode = loginMode;
            updateAuthModal();
            document.getElementById('authOverlay').classList.remove('hidden');
        }

        function hideAuthModal() {
            document.getElementById('authOverlay').classList.add('hidden');
            document.getElementById('authForm').reset();
        }

        function toggleAuthMode() {
            isLoginMode = !isLoginMode;
            updateAuthModal();
        }

        function updateAuthModal() {
            const title = document.getElementById('authTitle');
            const emailInput = document.getElementById('emailInput');
            const confirmPasswordInput = document.getElementById('confirmPasswordInput');
            const submitBtn = document.getElementById('authSubmitBtn');
            const switchText = document.getElementById('authSwitchText');
            const switchLink = document.getElementById('authSwitchLink');

            if (isLoginMode) {
                title.textContent = 'Anmelden';
                emailInput.style.display = 'none';
                confirmPasswordInput.style.display = 'none';
                submitBtn.textContent = 'Anmelden';
                switchText.textContent = 'Noch kein Account?';
                switchLink.textContent = 'Jetzt registrieren';
            } else {
                title.textContent = 'Registrieren';
                emailInput.style.display = 'block';
                confirmPasswordInput.style.display = 'block';
                submitBtn.textContent = 'Account erstellen';
                switchText.textContent = 'Bereits registriert?';
                switchLink.textContent = 'Jetzt anmelden';
            }
        }

        function handleAuthSubmit(e) {
            e.preventDefault();
            
            const username = document.getElementById('usernameInput').value.trim();
            const email = document.getElementById('emailInput').value.trim();
            const password = document.getElementById('passwordInput').value;
            const confirmPassword = document.getElementById('confirmPasswordInput').value;

            if (isLoginMode) {
                if (users[username] && users[username].password === password) {
                    currentUser = users[username];
                    hideAuthModal();
                    updateUIForUser();
                    showNotification('Erfolgreich angemeldet!', 'success');
                } else {
                    showNotification('Falscher Benutzername oder Passwort!', 'error');
                }
            } else {
                if (users[username]) {
                    showNotification('Benutzername bereits vergeben!', 'error');
                    return;
                }

                if (password !== confirmPassword) {
                    showNotification('Passw√∂rter stimmen nicht √ºberein!', 'error');
                    return;
                }

                if (password.length < 6) {
                    showNotification('Passwort muss mindestens 6 Zeichen haben!', 'error');
                    return;
                }

                users[username] = { username, email, password };
                currentUser = users[username];
                hideAuthModal();
                updateUIForUser();
                showNotification('Account erfolgreich erstellt!', 'success');
            }
        }

        function logout() {
            currentUser = null;
            updateUIForUser();
            showNotification('Erfolgreich abgemeldet!', 'success');
            document.getElementById('userDropdown').classList.remove('show');
        }

        function toggleUserMenu() {
            document.getElementById('userDropdown').classList.toggle('show');
        }

        function updateUIForUser() {
            const guestButtons = document.getElementById('guestButtons');
            const userMenu = document.getElementById('userMenu');
            const userAvatar = document.getElementById('userAvatar');
            const titleInput = document.getElementById('titleInput');
            const descriptionInput = document.getElementById('descriptionInput');
            const postInput = document.getElementById('postInput');
            
            if (currentUser) {
                guestButtons.classList.add('hidden');
                userMenu.classList.remove('hidden');
                userAvatar.textContent = currentUser.username.charAt(0).toUpperCase();
                
                titleInput.placeholder = 'Titel deines Codes...';
                descriptionInput.placeholder = 'Beschreibung (optional)...';
                updatePostInputPlaceholder();
            } else {
                guestButtons.classList.remove('hidden');
                userMenu.classList.add('hidden');
                
                titleInput.placeholder = 'Melde dich an, um Code zu posten...';
                descriptionInput.placeholder = 'Melde dich an, um Code zu posten...';
                postInput.placeholder = '// Melde dich an, um Code zu posten...';
            }
        }

        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 10px;
                color: white;
                font-weight: bold;
                z-index: 9999;
                animation: slideIn 0.3s ease;
                background: ${type === 'success' ? '#28a745' : '#dc3545'};
            `;
            notification.textContent = message;
            document.body.appendChild(notification);

            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
            `;
            document.head.appendChild(style);

            setTimeout(() => {
                notification.remove();
                style.remove();
            }, 3000);
        }

        // Post Type System
        function setupPostTypeListeners() {
            const snippetBtn = document.getElementById('snippetBtn');
            const projectBtn = document.getElementById('projectBtn');
            const tutorialBtn = document.getElementById('tutorialBtn');
            
            snippetBtn.addEventListener('click', () => switchPostType('snippet'));
            projectBtn.addEventListener('click', () => switchPostType('project'));
            tutorialBtn.addEventListener('click', () => switchPostType('tutorial'));
        }

        function switchPostType(type) {
            currentPostType = type;
            const snippetBtn = document.getElementById('snippetBtn');
            const projectBtn = document.getElementById('projectBtn');
            const tutorialBtn = document.getElementById('tutorialBtn');
            
            // Button States
            snippetBtn.classList.toggle('active', type === 'snippet');
            projectBtn.classList.toggle('active', type === 'project');
            tutorialBtn.classList.toggle('active', type === 'tutorial');
            
            updatePostInputPlaceholder();
        }

        function updatePostInputPlaceholder() {
            const postInput = document.getElementById('postInput');
            
            if (!currentUser) {
                postInput.placeholder = '// Melde dich an, um Code zu posten...';
                return;
            }
            
            switch(currentPostType) {
                case 'snippet':
                    postInput.placeholder = `// ${currentUser.username}, teile einen n√ºtzlichen Code-Schnipsel!
console.log("Hello World!");`;
                    break;
                case 'project':
                    postInput.placeholder = `// ${currentUser.username}, zeige dein komplettes Projekt!
class MeinProjekt {
    constructor() {
        // Dein Code hier...
    }
}`;
                    break;
                case 'tutorial':
                    postInput.placeholder = `// ${currentUser.username}, erkl√§re ein Konzept Schritt f√ºr Schritt!
// Schritt 1: Grundlagen
console.log("Tutorial startet...");`;
                    break;
            }
        }

        // Code Execution Functions
        function runCode(postId) {
            const post = posts.find(p => p.id == postId);
            if (!post) return;
            
            const outputDiv = document.getElementById(`output-${postId}`);
            outputDiv.style.display = 'block';
            outputDiv.classList.remove('code-error');
            
            const originalLog = console.log;
            const originalError = console.error;
            const originalWarn = console.warn;
            
            let output = [];
            
            console.log = (...args) => {
                output.push('LOG: ' + args.map(arg => 
                    typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
                ).join(' '));
                originalLog.apply(console, args);
            };
            
            console.error = (...args) => {
                output.push('ERROR: ' + args.map(arg => String(arg)).join(' '));
                originalError.apply(console, args);
            };
            
            console.warn = (...args) => {
                output.push('WARN: ' + args.map(arg => String(arg)).join(' '));
                originalWarn.apply(console, args);
            };
            
            try {
                const sandboxedCode = `
                    (function() {
                        const window = undefined;
                        const document = undefined;
                        const eval = undefined;
                        const Function = undefined;
                        
                        ${post.content}
                    })();
                `;
                
                const result = eval(sandboxedCode);
                if (result !== undefined) {
                    output.push('RETURN: ' + (typeof result === 'object' ? JSON.stringify(result, null, 2) : String(result)));
                }
                
                if (output.length === 0) {
                    output.push('Code ausgef√ºhrt (keine Ausgabe)');
                }
                
            } catch (error) {
                output.push('ERROR: ' + error.message);
                outputDiv.classList.add('code-error');
            } finally {
                console.log = originalLog;
                console.error = originalError;
                console.warn = originalWarn;
            }
            
            outputDiv.textContent = output.join('\n');
            outputDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function copyCode(postId) {
            const post = posts.find(p => p.id == postId);
            if (!post) return;
            
            navigator.clipboard.writeText(post.content).then(() => {
                showNotification('Code kopiert!', 'success');
            }).catch(() => {
                const textArea = document.createElement('textarea');
                textArea.value = post.content;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showNotification('Code kopiert!', 'success');
            });
        }

        function downloadProject(postId) {
            const post = posts.find(p => p.id == postId);
            if (!post) return;
            
            const filename = post.title.replace(/[^a-z0-9]/gi, '_').toLowerCase() + '.js';
            const content = `// ${post.title}\n// ${post.description || 'Kein Beschreibung'}\n// Autor: ${post.username}\n\n${post.content}`;
            
            const blob = new Blob([content], { type: 'text/javascript' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);
            
            showNotification('Projekt heruntergeladen!', 'success');
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
    </script>
</body>
</html>